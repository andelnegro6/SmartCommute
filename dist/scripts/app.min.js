"use strict";$(document).ready(function(){var m,b="",h="";$("#calendar").fullCalendar({header:{left:"today prev,next",center:"title",right:"timelineDay,timelineThreeDays,agendaWeek,month,listWeek"},slotEventOverlap:!1,allDay:!0,selectable:!0,selectHelper:!0,defaultView:"listWeek",navLinks:!0,editable:!1,eventLimit:!0,timezone:"America/Chicago",select:function(e,t){b=e.format(),h=t.format(),n(e)},eventClick:function(e,t,n){i(e)},eventRender:function(e,t){t.addClass(e.description),t.popover({title:e.title,content:e.description,trigger:"hover",placement:"top",container:"body"})},events:events()});var n=function(e){$("input#title").val(""),$("textarea#info_description").val(""),$("#newEvent").modal("show"),$("#submit").unbind(),$("#submit").on("click",function(){var e,t=$("input#title").val(),n=$("input#stime").val(),i=$("input#etime").val(),a=$("textarea#info_description").val(),r=firebase.auth().currentUser;null!=r&&(r.displayName,r.email,r.emailVerified,e=r.uid);var l=new Date(h),d=l.getUTCFullYear(),s=l.getUTCMonth()+1,o=l.getUTCDate(),c="",u="";u=s.toString().length<2?"0"+s.toString():s.toString(),c=o.toString().length<2?"0"+o.toString():o.toString();var v,g,f=d.toString()+"-"+u+"-"+c;if(t){var p={title:t,start:b+"T"+n+":00.000Z",end:f+"T"+i+":00.000Z",description:a};$("#calendar").fullCalendar("renderEvent",p,!0),$("#newEvent").modal("hide"),v={title:p.title,start:p.start,end:p.end,description:p.description},(g={})["/users/"+e+"/events/"+(m=firebase.database().ref().child("events").push().key)]=v,firebase.database().ref().update(g),console.log(m)}else alert("Title can't be blank. Please try again.")})},i=function(p){$("input#editTitle").val(p.title),$("textarea#editinfo_description").val(p.description);var e=(p.start._d.getHours()-1).toString(),t=p.start._d.getMinutes().toString(),n=(p.end._d.getHours()-1).toString(),i=p.end._d.getMinutes().toString();$("input#editstime").val(e+":"+t),$("input#editetime").val(n+":"+i),$("#editEvent").modal("show"),$("#update").unbind(),console.log("hola gueyes"),$("#update").on("click",function(){var e,t=$("input#editTitle").val(),n=$("input#editstime").val(),i=$("input#editetime").val(),a=$("textarea#editinfo_description").val(),r=firebase.auth().currentUser;null!=r&&(r.displayName,r.email,r.emailVerified,e=r.uid);var l=p.start._d.getUTCFullYear().toString(),d=(p.start._d.getUTCMonth()+1).toString(),s=p.start._d.getUTCDate().toString(),o=p.end._d.getUTCFullYear().toString(),c=(p.end._d.getUTCMonth()+1).toString(),u=(p.end._d.getUTCDate()-1).toString();s=s.length<2?"0"+s:s,d=d.length<2?"0"+d:d,u=u.length<2?"0"+u:u;var v=l+"-"+d+"-"+s,g=o+"-"+(c=c.length<2?"0"+c:c)+"-"+u;if(console.log(v,g),t){p.description=a,p.title=t,p.start=v+"T"+n+":00.000Z",p.end=g+"T"+i+":00.000Z";var f={title:t,start:v+"T"+n+":00.000Z",end:g+"T"+i+":00.000Z",description:a};$("#calendar").fullCalendar("updateEvent",p),$("#editEvent").modal("hide"),firebase.database().ref("users/"+e+/events/+eventKey).set({title:f.title,description:f.description,start:f.start,end:f.end})}else alert("Title can't be blank. Please try again.")}),$("#delete").on("click",function(){$("#delete").unbind(),p._id.includes("_fc")&&$("#calendar").fullCalendar("removeEvents",[getCal1Id(p._id)]),$("#calendar").fullCalendar("removeEvents",[p._id]),$("#editEvent").modal("hide")})}});var getCal1Id=function(e){return"_fc"+(e.replace("_fc","")-1)},disableEnter=function(){$("body").bind("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),!1})};function writeUserData(e,t,n){firebase.database().ref("users/"+e).set({title:eventData.title,description:eventData.description,start:eventData.start,end:eventData.end})}