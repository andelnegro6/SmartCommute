"use strict";$(function(){loadEvents(),saveEvent()}),$(document).ready(function(){var u="",f="";$("#calendar").fullCalendar({header:{left:"today prev,next",center:"title",right:"timelineDay,timelineThreeDays,agendaWeek,month,listWeek"},slotEventOverlap:!1,allDay:!0,selectable:!0,selectHelper:!0,defaultView:"listWeek",navLinks:!0,editable:!1,eventLimit:!0,timezone:"America/Chicago",select:function(e,t){u=e.format(),f=t.format(),n(e)},eventClick:function(e,t,n){i(e)},eventRender:function(e,t){t.addClass(e.description),t.popover({title:e.title,content:e.description,trigger:"hover",placement:"top",container:"body"})},events:events()});var n=function(e){$("input#title").val(""),$("textarea#info_description").val(""),$("#newEvent").modal("show"),$("#submit").unbind(),$("#submit").on("click",function(){var e=$("input#title").val(),t=$("input#stime").val(),n=$("input#etime").val(),i=$("textarea#info_description").val(),a=new Date(f),l=a.getUTCFullYear(),r=a.getUTCMonth()+1,d=a.getUTCDate()-1,o="",c="";c=r.toString().length<2?"0"+r.toString():r.toString(),o=d.toString().length<2?"0"+d.toString():d.toString();var v=l.toString()+"-"+c+"-"+o;if(e){var s={title:e,start:u+"T"+t+":00.000Z",end:v+"T"+n+":00.000Z",description:i};$("#calendar").fullCalendar("renderEvent",s,!0),$("#newEvent").modal("hide")}else alert("Title can't be blank. Please try again.")})},i=function(n){$("input#editTitle").val(n.title),$("textarea#editinfo_description").val(n.description),$("#editEvent").modal("show"),$("#update").unbind(),$("#update").on("click",function(){var e=$("input#editTitle").val(),t=$("textarea#editinfo_description").val();$("#editEvent").modal("hide"),e?(n.description=t,n.title=e,$("#calendar").fullCalendar("updateEvent",n)):alert("Title can't be blank. Please try again.")}),$("#delete").on("click",function(){$("#delete").unbind(),n._id.includes("_fc")&&$("#calendar").fullCalendar("removeEvents",[getCal1Id(n._id)]),$("#calendar").fullCalendar("removeEvents",[n._id]),$("#editEvent").modal("hide")})}});var getCal1Id=function(e){return"_fc"+(e.replace("_fc","")-1)},disableEnter=function(){$("body").bind("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),!1})};