"use strict";$(document).ready(function(){var p="",m="";$("#calendar").fullCalendar({header:{left:"today prev,next",center:"title",right:"timelineDay,timelineThreeDays,agendaWeek,month,listWeek"},slotEventOverlap:!1,allDay:!0,selectable:!0,selectHelper:!0,defaultView:"listWeek",navLinks:!0,editable:!1,eventLimit:!0,timezone:"America/Chicago",select:function(e,t){p=e.format(),m=t.format(),n(e)},eventClick:function(e,t,n){i(e)},eventRender:function(e,t){t.addClass(e.description),t.popover({title:e.title,content:e.description,trigger:"hover",placement:"top",container:"body"})},events:events()});var n=function(e){$("input#title").val(""),$("textarea#info_description").val(""),$("#newEvent").modal("show"),$("#submit").unbind(),$("#submit").on("click",function(){var e,t=$("input#title").val(),n=$("input#stime").val(),i=$("input#etime").val(),a=$("textarea#info_description").val(),l=firebase.auth().currentUser;null!=l&&(l.displayName,l.email,l.emailVerified,e=l.uid);var r=new Date(m),d=r.getUTCFullYear(),o=r.getUTCMonth()+1,s=r.getUTCDate()-1,c="",u="";u=o.toString().length<2?"0"+o.toString():o.toString(),c=s.toString().length<2?"0"+s.toString():s.toString();var v=d.toString()+"-"+u+"-"+c;if(t){var f={title:t,start:p+"T"+n+":00.000Z",end:v+"T"+i+":00.000Z",description:a};$("#calendar").fullCalendar("renderEvent",f,!0),$("#newEvent").modal("hide"),firebase.database().ref("users/"+e).set({title:f.title,description:f.description,start:f.start,end:f.end}),console.log(f)}else alert("Title can't be blank. Please try again.")})},i=function(n){$("input#editTitle").val(n.title),$("textarea#editinfo_description").val(n.description),$("#editEvent").modal("show"),$("#update").unbind(),$("#update").on("click",function(){var e=$("input#editTitle").val(),t=$("textarea#editinfo_description").val();$("input#stime").val(),$("input#etime").val();$("#editEvent").modal("hide"),e?(n.description=t,n.title=e,$("#calendar").fullCalendar("updateEvent",n)):alert("Title can't be blank. Please try again.")}),$("#delete").on("click",function(){$("#delete").unbind(),n._id.includes("_fc")&&$("#calendar").fullCalendar("removeEvents",[getCal1Id(n._id)]),$("#calendar").fullCalendar("removeEvents",[n._id]),$("#editEvent").modal("hide")})}});var getCal1Id=function(e){return"_fc"+(e.replace("_fc","")-1)},disableEnter=function(){$("body").bind("keypress",function(e){if(13==e.keyCode)return e.preventDefault(),!1})};function writeUserData(e,t,n){firebase.database().ref("users/"+e).set({title:eventData.title,description:eventData.description,start:eventData.start,end:eventData.end})}