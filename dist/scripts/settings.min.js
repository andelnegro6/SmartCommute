"use strict";$(document).ready(function(){var e={availableTransports:["off","on","on","on","on","on"],preferredTransport:"bus"},s={};function n(a){null!=a.toJSON()||null!=a.toJSON()?o(s=a.toJSON()):o(e)}function l(a){console.log("ERROR!"+a)}function o(a){console.log(a.availableTransports,a.preferredTransport),$("input#a_car").val(a.availableTransports[0]),$("input#a_walk").val(a.availableTransports[1]),$("input#a_bike").val(a.availableTransports[2]),$("input#a_metro").val(a.availableTransports[3]),$("input#a_bus").val(a.availableTransports[4]),$("input#a_tram").val(a.availableTransports[5]),$("select#prefTransport").val(a.preferredTransport)}new Promise(function(n,r){firebase.auth().onAuthStateChanged(function(a){if(a){var e=a.uid;n(e)}else r("User is not logged in")})}).then(function(a){firebase.database().ref("users/"+a+"/settings/").once("value",n,l)}).catch(function(a){alert(a)}),$("#saveNexit").on("click",function(){var a=$("select#prefTransport").val(),e=[$("input#a_car").val(),$("input#a_walk").val(),$("input#a_bike").val(),$("input#a_metro").val(),$("input#a_bus").val(),$("input#a_tram").val()];console.log(a,e);var n,r=firebase.auth().currentUser;null!=r&&(n=r.uid),s={availableTransports:e,preferredTransport:a};var t=firebase.database().ref("users/"+n+"/settings/");t.set(s),t.once("value",function(a){o(a.toJSON())},l)})});