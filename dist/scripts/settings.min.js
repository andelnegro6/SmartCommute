"use strict";$(document).ready(function(){var a={availableTransports:[!1,!0,!0,!0,!0,!0],preferredTransport:"bus"},o={};function r(e){null!=e.toJSON()||null!=e.toJSON()?s(o=e.toJSON()):null==e.toJSON()&&s(a)}function p(e){console.log("ERROR!"+e)}function s(e){$("input#a_car").prop("checked",e.availableTransports[0]),$("input#a_walk").prop("checked",e.availableTransports[1]),$("input#a_bike").prop("checked",e.availableTransports[2]),$("input#a_metro").prop("checked",e.availableTransports[3]),$("input#a_bus").prop("checked",e.availableTransports[4]),$("input#a_tram").prop("checked",e.availableTransports[5]),$("select#prefTransport").val(e.preferredTransport)}new Promise(function(r,t){firebase.auth().onAuthStateChanged(function(e){if(e){var a=e.uid;r(a)}else t("User is not logged in")})}).then(function(e){firebase.database().ref("users/"+e+"/settings/").once("value",r,p)}).catch(function(e){alert(e)}),$("#saveNexit").on("click",function(){var e=$("select#prefTransport").val(),a=[$("input#a_car").prop("checked")||!1,$("input#a_walk").prop("checked")||!1,$("input#a_bike").prop("checked")||!1,$("input#a_metro").prop("checked")||!1,$("input#a_bus").prop("checked")||!1,$("input#a_tram").prop("checked")||!1];console.log(e,a);var r,t=firebase.auth().currentUser;null!=t&&(r=t.uid),o={availableTransports:a,preferredTransport:e};var n=firebase.database().ref("users/"+r+"/settings/");n.set(o),n.once("value",function(e){s(e.toJSON())},p)})});